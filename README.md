# CoronaMETRIC - Corona Magnetic-field Evaluation Through Real Image-model Comparison


## Description

This package, given a PSI MAS model and a coronagraph input image generates coaligned electron density and magnetic field from the perspective of the input image.

## Package Layout

### IDL Scripts
- generate_forward_model.pro : responsible for generating forward model from PSI data cube given input model_parameters
- get_fordump.pro : responsible for transforming forward data (electron density, bx, by, bz) into cartesian coordinates, saving data slices for later integration
- image_coalignment.pro : responsible for coaligning model data to input observatory data

### Python Scripts
- integrate.py : responsible for integrating data slices generated by get_fordump.pro to produce integrated electron desnity, magnetic field data
- coalign.py : responsible for generating output image coalignment plots

## Python Dependencies

- os
- numpy
- pandas
- matplotlib
- astropy
- sunpy
- gitpython

## IDL Dependencies

- [SSW IDL](https://www.mssl.ucl.ac.uk/surf/sswdoc/solarsoft/ssw_install_howto.html)
  - Note: package FORWARD must be installed with SolarSoft Install script

## Submodules Used
- V. Uritsky. Quasi-Radial Field-line Tracing (QRaFT v2.0): an image analysis package for reconstructing the magnetic field geometry of the open-flux solar corona, GitHub / Zenode, 2022, URL: github.com/uritsky/QRaFT,  DOI:10.5281/zenodo.7410948.

## Data Used 
- Predictive Science Inc. 2017 solar eclipse prediction raw simulation data. Data is available at [this link](https://www.predsci.com/corona/aug2017eclipse/data/eclipse2017_mhd_final.zip). Follow the instructions in ExampleCommands_FORWARD.txt to generate data cube used in this analysis. Citation: Mikić, Z., Downs, C., Linker, J.A. et al. Predicting the corona for the 21 August 2017 total solar eclipse. Nat Astron 2, 913–921 (2018). https://doi.org/10.1038/s41550-018-0562-5
